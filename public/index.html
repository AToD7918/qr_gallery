<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <title>메뉴</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Apple SD Gothic Neo', sans-serif;
      background: #1a1a1a;
      overflow: hidden;
      height: 100vh;
      width: 100vw;
    }
    
    .container {
      position: relative;
      width: 100%;
      height: 100vh;
      display: flex;
      flex-direction: column;
      background: #1a1a1a;
    }
    
    .slider-container {
      flex: 1;
      position: relative;
      overflow: hidden;
      background: #1a1a1a;
    }
    
    .slider {
      display: flex;
      height: 100%;
      transition: transform 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      touch-action: pan-y;
    }

    .slider.zoomed {
      touch-action: pan-x pan-y;
    }
    
    .slide {
      min-width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 10px;
    }
    
    .slide img {
      max-width: 100%;
      max-height: 100%;
      width: auto;
      height: auto;
      object-fit: contain;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
      cursor: zoom-in;
      transition: transform 0.3s ease;
    }

    .slide img.zoomed {
      cursor: zoom-out;
      border-radius: 0;
    }

    .slide.zoom-mode {
      overflow: auto;
      -webkit-overflow-scrolling: touch;
      cursor: grab;
    }

    .slide.zoom-mode:active {
      cursor: grabbing;
    }
    
    .controls {
      position: fixed;
      bottom: env(safe-area-inset-bottom, 20px);
      left: 0;
      right: 0;
      padding: 20px;
      padding-bottom: calc(20px + env(safe-area-inset-bottom, 0px));
      background: linear-gradient(to top, rgba(0,0,0,0.7), transparent);
      display: flex;
      justify-content: space-between;
      align-items: center;
      z-index: 5;
    }
    
    .nav-btn {
      background: rgba(255, 255, 255, 0.95);
      border: none;
      width: 48px;
      height: 48px;
      border-radius: 50%;
      font-size: 20px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 2px 8px rgba(0,0,0,0.2);
      transition: all 0.2s;
      color: #333;
      font-weight: bold;
    }
    
    .nav-btn:active {
      transform: scale(0.95);
      background: rgba(255, 255, 255, 1);
    }
    
    .nav-btn:disabled {
      opacity: 0.3;
      cursor: not-allowed;
    }
    
    .counter {
      background: rgba(255, 255, 255, 0.95);
      padding: 8px 16px;
      border-radius: 20px;
      font-size: 14px;
      font-weight: 600;
      color: #333;
      box-shadow: 0 2px 8px rgba(0,0,0,0.2);
    }
    
    .dots {
      position: fixed;
      bottom: calc(80px + env(safe-area-inset-bottom, 0px));
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 8px;
      z-index: 5;
    }
    
    .dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.5);
      transition: all 0.3s;
    }
    
    .dot.active {
      background: #fff;
      width: 24px;
      border-radius: 4px;
    }

    @media (max-width: 480px) {
      .slide {
        padding: 10px;
      }
      
      .nav-btn {
        width: 44px;
        height: 44px;
      }
      
      .controls {
        padding-bottom: calc(15px + env(safe-area-inset-bottom, 0px));
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="slider-container">
      <div class="slider" id="slider"></div>
      
      <div class="dots" id="dots"></div>
      
      <div class="controls">
        <button class="nav-btn" id="prevBtn">◀</button>
        <div class="counter" id="counter"></div>
        <button class="nav-btn" id="nextBtn">▶</button>
      </div>
    </div>
  </div>

  <script>
    const images = [
      'img/photo.jpg',
      'img/photo1.jpg'
    ];

    let currentIndex = 0;
    const slider = document.getElementById('slider');
    const dots = document.getElementById('dots');
    const counter = document.getElementById('counter');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');

    // 슬라이드 생성
    images.forEach((src, index) => {
      const slide = document.createElement('div');
      slide.className = 'slide';
      const img = document.createElement('img');
      img.src = src;
      img.alt = `메뉴 ${index + 1}`;
      img.loading = index === 0 ? 'eager' : 'lazy';
      
      // 이미지 확대/축소 기능
      let isZoomed = false;
      let scale = 1;
      let panning = false;
      let pointX = 0;
      let pointY = 0;
      let start = { x: 0, y: 0 };

      img.addEventListener('click', (e) => {
        if (!isZoomed) {
          // 확대
          isZoomed = true;
          scale = 2.5;
          img.classList.add('zoomed');
          slide.classList.add('zoom-mode');
          slider.classList.add('zoomed');
          
          // 클릭한 위치를 중심으로 확대
          const rect = img.getBoundingClientRect();
          const x = e.clientX - rect.left;
          const y = e.clientY - rect.top;
          
          img.style.transformOrigin = `${x}px ${y}px`;
          img.style.transform = `scale(${scale})`;
          
          // 스와이프 비활성화
          slider.style.transition = 'none';
        } else {
          // 축소
          resetZoom();
        }
      });

      // 더블탭으로 확대/축소
      let lastTap = 0;
      img.addEventListener('touchend', (e) => {
        const currentTime = new Date().getTime();
        const tapLength = currentTime - lastTap;
        if (tapLength < 300 && tapLength > 0) {
          e.preventDefault();
          if (!isZoomed) {
            isZoomed = true;
            scale = 2.5;
            img.classList.add('zoomed');
            slide.classList.add('zoom-mode');
            slider.classList.add('zoomed');
            
            const touch = e.changedTouches[0];
            const rect = img.getBoundingClientRect();
            const x = touch.clientX - rect.left;
            const y = touch.clientY - rect.top;
            
            img.style.transformOrigin = `${x}px ${y}px`;
            img.style.transform = `scale(${scale})`;
            slider.style.transition = 'none';
          } else {
            resetZoom();
          }
        }
        lastTap = currentTime;
      });

      function resetZoom() {
        isZoomed = false;
        scale = 1;
        img.classList.remove('zoomed');
        slide.classList.remove('zoom-mode');
        slider.classList.remove('zoomed');
        img.style.transform = 'scale(1)';
        img.style.transformOrigin = 'center';
        slider.style.transition = 'transform 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94)';
      }

      slide.appendChild(img);
      slider.appendChild(slide);

      // 도트 생성
      const dot = document.createElement('div');
      dot.className = 'dot';
      if (index === 0) dot.classList.add('active');
      dots.appendChild(dot);
    });

    function updateSlider() {
      slider.style.transform = `translateX(-${currentIndex * 100}%)`;
      counter.textContent = `${currentIndex + 1} / ${images.length}`;
      
      // 도트 업데이트
      document.querySelectorAll('.dot').forEach((dot, index) => {
        dot.classList.toggle('active', index === currentIndex);
      });

      // 버튼 상태 업데이트
      prevBtn.disabled = currentIndex === 0;
      nextBtn.disabled = currentIndex === images.length - 1;
    }

    prevBtn.addEventListener('click', () => {
      if (currentIndex > 0) {
        currentIndex--;
        updateSlider();
      }
    });

    nextBtn.addEventListener('click', () => {
      if (currentIndex < images.length - 1) {
        currentIndex++;
        updateSlider();
      }
    });

    // 터치 스와이프 기능
    let touchStartX = 0;
    let touchEndX = 0;
    let isSwiping = false;

    slider.addEventListener('touchstart', (e) => {
      // 확대된 상태에서는 스와이프 비활성화
      if (slider.classList.contains('zoomed')) return;
      
      touchStartX = e.changedTouches[0].screenX;
      isSwiping = true;
    }, { passive: true });

    slider.addEventListener('touchmove', (e) => {
      if (!isSwiping || slider.classList.contains('zoomed')) return;
    }, { passive: true });

    slider.addEventListener('touchend', (e) => {
      // 확대된 상태에서는 스와이프 비활성화
      if (slider.classList.contains('zoomed')) return;
      if (!isSwiping) return;
      
      touchEndX = e.changedTouches[0].screenX;
      handleSwipe();
      isSwiping = false;
    }, { passive: true });

    function handleSwipe() {
      const swipeThreshold = 50;
      const diff = touchStartX - touchEndX;

      if (Math.abs(diff) > swipeThreshold) {
        if (diff > 0 && currentIndex < images.length - 1) {
          // 왼쪽 스와이프 (다음)
          currentIndex++;
          updateSlider();
        } else if (diff < 0 && currentIndex > 0) {
          // 오른쪽 스와이프 (이전)
          currentIndex--;
          updateSlider();
        }
      }
    }

    // 키보드 네비게이션
    document.addEventListener('keydown', (e) => {
      if (e.key === 'ArrowLeft' && currentIndex > 0) {
        currentIndex--;
        updateSlider();
      } else if (e.key === 'ArrowRight' && currentIndex < images.length - 1) {
        currentIndex++;
        updateSlider();
      }
    });

    // 초기화
    updateSlider();
  </script>
</body>
</html>
